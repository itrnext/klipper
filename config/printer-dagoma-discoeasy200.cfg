# This file contains common pin mappings for RAMPS (v1.3 and later)
# boards. RAMPS boards typically use a firmware compiled for the AVR
# atmega2560 (though the atmega1280 is also possible).

# MKS Base V1.5

# Dagoma DiscoEasy 200 with Extrudeur+ and white NTC100K

# See docs/Config_Reference.md for a description of parameters.

[thermistor Dagoma white NTC100K]
temperature1: 50
resistance1: 31760.61
temperature2: 170
resistance2: 689.47
temperature3: 280
resistance3: 51.04

[stepper_x]
step_pin: X_STEP
dir_pin: X_DIR
enable_pin: !X_EN
microsteps: 16
# 80 microsteps for 1mm with 200 steps for one revolution
# 200*16 = 3200 microsteps for one revolution
# 1/80*3200 = 40mm
rotation_distance: 40
endstop_pin: X_MAX
position_endstop: -2.5
position_min: -2.5
position_max: 200
homing_speed: 50

[stepper_y]
step_pin: Y_STEP
dir_pin: Y_DIR
enable_pin: !Y_EN
microsteps: 16
# 80 microsteps for 1mm with 200 steps for one revolution
# 200*16 = 3200 microsteps for one revolution
# 1/80*3200 = 40mm
rotation_distance: 40
endstop_pin: X_MIN
position_endstop: 200
position_min: -2.5
position_max: 200
homing_speed: 50

[stepper_z]
step_pin: Z_STEP
dir_pin: Z_DIR
enable_pin: !Z_EN
microsteps: 16
# 800 microsteps for 1mm with 200 steps for one revolution
# 200*16 = 3200 microsteps for one revolution
# 1/800*3200 = 4mm
rotation_distance: 4
endstop_pin: probe:z_virtual_endstop
position_max: 205
homing_speed: 4
homing_retract_speed: 1
second_homing_speed: 1
homing_retract_dist: 5

[extruder]
step_pin: E0_STEP
dir_pin: E0_DIR
enable_pin: !E0_EN
microsteps: 16
# 96.55 microsteps for 1mm with 200 steps for one revolution
# 200*16 = 3200 microsteps for one revolution
# 1 / 96.55 * 3200 = 33.143 mm
rotation_distance: 33.143
nozzle_diameter: 0.400
filament_diameter: 1.750

max_extrude_only_velocity: 170.00
max_extrude_only_accel: 10000

heater_pin: HEATER_E0
sensor_type: Dagoma white NTC100K
sensor_pin: A13_THERM2

control = pid
pid_Kp=39.719
pid_Ki=3.190
pid_Kd=123.626

min_temp: 5
max_temp: 275

[fan]
pin: HEATER_FAN

[heater_fan fan1]
pin: HEATER_E1

[probe]
pin: !Y_MAX
y_offset: 21
z_offset: 1.6
# At 25 degres
samples: 1
sample_retract_dist: 5
speed: 1
lift_speed: 1
samples_result: median
;samples_tolerance: 0.0025

[safe_z_home]
home_xy_position: 100, 100
z_hop: 5

[filament_switch_sensor switch_sensor]
switch_pin: !Z_MAX

[bed_mesh]
speed: 120
horizontal_move_z: 5
mesh_min: 0, 21
mesh_max: 200, 200
probe_count: 5, 5

[mcu]
serial: /dev/serial/by-id/usb-FTDI_FT232R_USB_UART_AL03LWXN-if00-port0

[printer]
kinematics: cartesian
max_velocity: 500
max_accel: 1000
max_z_velocity: 4
max_z_accel: 20

[gcode_button pause]
pin: !Z_MIN
press_gcode: M114

# Common EXP1 / EXP2 (display) pins
[board_pins]
aliases:
	# MKS BASE 1.5
	LED=PB7,
	X_STEP=PF0, X_DIR=PF1, X_EN=PD7, X_MIN=PE5, X_MAX=PE4, X_MS1=PE3, X_MS2=PH3,
	Y_STEP=PF6, Y_DIR=PF7, Y_EN=PF2, Y_MIN=PJ1, Y_MAX=PJ0, Y_MS1=PF5, Y_MS2=PF4,
	Z_STEP=PL3, Z_DIR=PL1, Z_EN=PK0, Z_MIN=PD3, Z_MAX=PD2, Z_MS1=PA0, Z_MS2=PG2,
	E0_STEP=PA4, E0_DIR=PA6, E0_EN=PA2, E0_MS1=PK1, E0_MS2=PK2,
	E1_STEP=PC1, E1_DIR=PC3, E1_EN=PC7, E1_MS1=PF3, E1_MS2=PG5,
	HEATER_FAN=PH6, HEATER_E0=PB4, HEATER_E1=PH4, HEATER_BED=PH5,
	A13_THERM2=PK5, A15_THERM0=PK7, A14_THERM1=PK6,
	BEEPER=PC0,
	
    # Common EXP1 header found on many "all-in-one" ramps clones
    EXP1_1=PC0, EXP1_3=PH0, EXP1_5=PA1, EXP1_7=PA5, EXP1_9=<GND>,
    EXP1_2=PC2, EXP1_4=PH1, EXP1_6=PA3, EXP1_8=PA7, EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=PB3, EXP2_3=PC6, EXP2_5=PC4, EXP2_7=PL0, EXP2_9=<GND>,
    EXP2_2=PB1, EXP2_4=PB0, EXP2_6=PB2, EXP2_8=PG0, EXP2_10=<RST>
    # Pins EXP2_1, EXP2_6, EXP2_2 are also MISO, MOSI, SCK of bus "spi"
    # Note, some boards wire: EXP2_8=<RST>, EXP2_10=PG0

# See the sample-lcd.cfg file for definitions of common LCD displays.
